- content_for(:opengraph_meta_tags, opengraph_meta_tags_for(@canvas, :url => canvas_url(@canvas), :site_name => @canvas.name))
- content_for :stylesheets do
  = stylesheet_link_tag 'compiled/canvas.css', :media => 'screen, projection'
- content_for :javascripts do
  = javascript_include_tag 'canvas_show'  
-if can?(:update, @canvas)
  - content_for :javascripts do
    = javascript_include_tag 'canvas_edit.js', :media => 'screen, projection'

= render 'shared/welcome'

- if can?(:apply, @canvas)
  .apply-join
    - if @canvas.closed?
      #apply.button
        Apply Now
      #apply-form
        %form#applicant_form
          %div Please let us know why you would like to join this community
          %textarea#note{:value => current_user.id, :name => "note", :style => "height:125px"}
    - else
      #join.button
        Join Now

- if can?(:create, Widget.new(:canvas => @canvas))
  %br
  #toolbar
    %a.add_widget.tab{:href => "#", :data => {:content_type => "text_content", :canvas_id => @canvas.id}} Add snippet
    %a.add_widget.tab{:href => "#", :data => {:content_type => "image_content", :canvas_id => @canvas.id}} Share a photo
    %a.add_widget.tab{:href => "#", :data => {:content_type => "link_content", :canvas_id => @canvas.id}} Post a link
    %a.add_widget.tab{:href => "#", :data => {:content_type => "question_content", :canvas_id => @canvas.id}} Ask a question
    
    %div{:style => "float:right;"}
      = render 'add_via_bookmarklet'
      = render 'add_via_email'
  
  %ul#inline_form
    - @new_widgets.each do |t, widget|
      %div{:style => "display:none;"}
        = render :partial => "widgets/canvas_feed", :object => widget, :as => :widget
= hint_for(@canvas, current_user, "widget")
\
%ul#feed
  = render :collection => Widget.for_canvas(@canvas.id,1), :partial => "widgets/canvas_feed", :as => :widget
  
.widget_history_content

#pages
  
  - if can? :create, Page.new(:canvas => @canvas)
    #toolbar
      %a.add_page.tab{:href => new_canvas_page_path(@canvas), :data => {:content_type => "page", :canvas_id => @canvas.id}} New Page
    = hint_for(@canvas, current_user, "page")
  %ul.page_list
  - @canvas.pages.each do |page|
    %li.page_icon_grid
      %a{:href => canvas_page_path(@canvas, page)}
        %img{:src => "/images/page.png"}
        .page_icon_title= page.title
